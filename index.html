<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Farmacia DP ‚Äî TPV + Bodega</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <aside class="sidebar">
    <div class="brand">Farmacia DP</div>
    <nav>
      <button data-tab="ventas" class="active">üõí Ventas</button>
      <button data-tab="inventario">üì¶ Inventario</button>
      <button data-tab="bodega">üè¨ Bodega</button>
      <button data-tab="reportes">üìà Reportes</button>
      <button data-tab="config">‚öôÔ∏è Config</button>
    </nav>
  </aside>

  <main class="main">
    <!-- KPIs -->
    <section class="kpis">
      <div class="kpi"><span>Ventas hoy</span><strong id="kpiHoy">$0.00</strong></div>
      <div class="kpi"><span>Tickets</span><strong id="kpiTickets">0</strong></div>
      <div class="kpi"><span>IVA</span><strong id="kpiIVA">0%</strong></div>
      <div class="kpi"><span>Top √≠tem</span><strong id="kpiTop">‚Äî</strong></div>
    </section>

    <!-- VENTAS -->
    <section id="tab-ventas">
      <div class="ventas">
        <div class="catalogo">
          <div class="row">
            <input id="buscador" class="input" placeholder="Buscar nombre o SKU‚Ä¶">
            <select id="filtroTipo" class="select">
              <option value="todos">Todos</option>
              <option value="producto">Productos</option>
              <option value="servicio">Servicios</option>
            </select>
          </div>
          <div id="gridProductos" class="grid"></div>
        </div>

        <aside class="carrito">
          <h3>Carrito</h3>
          <div id="lineas"></div>

          <!-- EXTRAS alineados en una fila -->
          <div class="extras">
            <input id="extraDesc" class="input" placeholder="Descripci√≥n (ej. Curaci√≥n)">
            <input id="extraMonto" class="input" type="number" step="0.01" placeholder="$">
            <button id="btnAddExtra" class="btn">Agregar extra</button>
          </div>

          <!-- RECETA (opcional) -->
          <div class="bloque">
            <label class="label">Receta del paciente (PDF/imagen):</label>
            <input type="file" id="archivoReceta" class="input">
          </div>

          <!-- PAGO SIEMPRE VISIBLE -->
          <div class="pago">
            <select id="tipoPago" class="select">
              <option value="Efectivo" selected>Efectivo</option>
              <option value="Tarjeta">Tarjeta</option>
              <option value="Transferencia">Transferencia</option>
              <option value="Mixto">Mixto</option>
            </select>
            <input id="referenciaPago" class="input" placeholder="Referencia / notas">
          </div>

          <div id="resumen" class="resumen"></div>
          <div class="acciones">
            <button id="btnCobrar" class="btn primary">Cobrar</button>
            <button id="btnVaciar" class="btn ghost">Vaciar</button>
          </div>
        </aside>
      </div>
    </section>

    <!-- INVENTARIO (piso/mostrador) -->
    <section id="tab-inventario" style="display:none">
      <div class="row">
        <h3>Inventario (Mostrador)</h3>
        <button id="btnNuevoItem" class="btn">+ Nuevo</button>
      </div>
      <table class="tabla" id="tablaInventario">
        <thead>
          <tr><th>SKU</th><th>Nombre</th><th>Tipo</th><th>Stock Piso</th><th>Stock Bodega</th><th>Precio</th><th>Solicitar</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- BODEGA -->
    <section id="tab-bodega" style="display:none">
      <div class="grid2">
        <div class="card">
          <h3>Ingresar a Bodega</h3>
          <div class="gridForm">
            <input id="inSku" class="input" placeholder="SKU">
            <input id="inNombre" class="input" placeholder="Nombre (si es nuevo)">
            <input id="inLote" class="input" placeholder="Lote">
            <input id="inCad" class="input" type="date" placeholder="Caducidad">
            <input id="inCant" class="input" type="number" min="1" placeholder="Cantidad">
            <input id="inCosto" class="input" type="number" step="0.01" placeholder="Costo (opcional)">
            <button id="btnIngresar" class="btn primary">Ingresar</button>
          </div>
        </div>

        <div class="card">
          <h3>Surtir a Inventario</h3>
          <div class="gridForm">
            <input id="suSku" class="input" placeholder="SKU">
            <input id="suCant" class="input" type="number" min="1" placeholder="Cantidad">
            <button id="btnSurtir" class="btn">Mover (FIFO cad)</button>
          </div>
        </div>
      </div>

      <div class="row mt">
        <h3>Solicitudes desde Inventario</h3>
        <button id="btnAtenderTodo" class="btn ghost">Atender todo (si alcanza)</button>
      </div>
      <table class="tabla" id="tablaSolicitudes">
        <thead><tr><th>ID</th><th>SKU</th><th>Nombre</th><th>Solicitado</th><th>Estado</th><th>Acci√≥n</th></tr></thead>
        <tbody></tbody>
      </table>

      <div class="row mt"><h3>Kardex</h3></div>
      <table class="tabla" id="tablaKardex">
        <thead><tr><th>Fecha</th><th>SKU</th><th>Tipo</th><th>Detalle</th><th>Cant</th></tr></thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- REPORTES / CONFIG -->
    <section id="tab-reportes" style="display:none">
      <h3>Resumen</h3>
      <div id="resumenReporte" class="chips"></div>
    </section>

    <section id="tab-config" style="display:none">
      <h3>Par√°metros</h3>
      <div class="row">
        <label class="label">IVA (%)</label>
        <input id="iva" class="input" type="number" min="0" max="30" step="0.01" value="0">
        <button id="btnIVA" class="btn">Aplicar</button>
      </div>
      <div class="row mt">
        <button id="btnGuardar" class="btn">üíæ Guardar</button>
        <button id="btnRestaurar" class="btn ghost">‚ü≥ Restaurar</button>
        <button id="btnWipe" class="btn danger">üóëÔ∏è Borrar todo</button>
      </div>
    </section>
  </main>

  <!-- Modal reutilizable -->
  <dialog id="modal">
    <form method="dialog" id="modalForm">
      <h3 id="modalTitle">Nuevo</h3>
      <div id="modalBody"></div>
      <menu>
        <button value="cancel" class="btn ghost">Cancelar</button>
        <button value="ok" class="btn primary">Guardar</button>
      </menu>
    </form>
  </dialog>

  <script src="app.js"></script>
</body>
</html>
