<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Farmacia DP ‚Äì TPV Demo</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="app">
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <div class="logo-badge">Rx</div>
      <div>
        <div class="sidebar-title">Farmacia DP</div>
        <div class="sidebar-sub">TPV Demo</div>
      </div>
    </div>
    <nav class="nav">
      <div class="nav-section-title">General</div>
      <div class="nav-item active" data-page="dashboard"><span class="icon">üìä</span><span>Dashboard</span></div>
      <div class="nav-item" data-page="ventas"><span class="icon">üßæ</span><span>Ventas</span></div>
      <div class="nav-item" data-page="inventario"><span class="icon">üíä</span><span>Inventario</span></div>
      <div class="nav-item" data-page="bodega"><span class="icon">üì¶</span><span>Bodega</span></div>
      <div class="nav-item" data-page="clientes"><span class="icon">üë§</span><span>Clientes</span></div>
      <div class="nav-item" data-page="historial"><span class="icon">üìö</span><span>Historial</span></div>
      <div class="nav-item" data-page="reportes"><span class="icon">üìà</span><span>Reportes</span></div>
      <div class="nav-item" data-page="config"><span class="icon">‚öôÔ∏è</span><span>Configuraci√≥n</span></div>
    </nav>
    <div class="sidebar-footer">
      <strong>Farmacia DP v1 Demo</strong>
      Datos locales ¬∑ Funcional en navegador
    </div>
  </aside>

  <main class="main">
    <header class="topbar">
      <div class="topbar-left">
        <button class="burger-btn" id="btnBurger"><span></span></button>
        <div class="topbar-title" id="pageTitle">Dashboard</div>
      </div>
      <div class="topbar-right">Modo local ¬∑ Prueba en este dispositivo</div>
    </header>
    <div class="content">
      <!-- DASHBOARD -->
      <section class="page active" id="page-dashboard">
        <div class="card">
          <div class="card-title">Dashboard</div>
          <div class="card-sub">Resumen generado a partir del historial de ventas (demo).</div>
          <div class="dash-grid" id="dashKpis">
            <!-- KPIs por JS -->
          </div>
          <div class="charts-grid">
            <div class="chart-placeholder">
              <strong>Ventas √∫ltimos 7 d√≠as</strong>
              <div id="chart7dias" style="margin-top:6px;"></div>
            </div>
            <div class="chart-placeholder">
              <strong>Formas de pago (hoy)</strong>
              <div id="chartPagos" style="margin-top:6px;"></div>
              <div class="donut-legend" id="legendPagos"></div>
            </div>
          </div>
          <div class="grid" style="margin-top:14px;grid-template-columns:1.6fr 1.4fr;">
            <div>
              <div class="card-title" style="font-size:14px;">√öltimas ventas</div>
              <div class="list-mini" id="listaUltimasVentas"></div>
            </div>
            <div>
              <div class="card-title" style="font-size:14px;">Kardex reciente</div>
              <div class="list-mini" id="listaKardex"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- VENTAS -->
      <section class="page" id="page-ventas">
        <div class="card">
          <div class="card-title">Ventas</div>
          <div class="card-sub">Busca productos, arma el carrito y genera ticket 58&nbsp;mm.</div>

          <div class="ventas-layout">
            <div>
              <div class="ventas-filtros">
                <input id="search" class="input" placeholder="üîç S√∫per buscador (nombre o SKU)">
                <input id="scan" class="input" placeholder="üî¢ Esc√°ner / c√≥digo (Enter = SKU)">
                <button class="btn btn-soft" id="btnClear">Limpiar</button>
                <button class="btn btn-primary" id="btnDemoInv">Cargar demo</button>
              </div>
              <div class="hint">
                Tip: Carga inventario demo para probar, o da de alta productos desde la secci√≥n <strong>Inventario</strong>.
              </div>
              <div id="productosGrid" class="productos-grid"></div>
              <div id="productosEmpty" style="display:none;margin-top:18px;font-size:13px;color:#6b7280;">
                No hay productos cargados. Usa <strong>Cargar demo</strong> o da de alta productos en Inventario.
              </div>
            </div>

            <div>
              <div class="card" style="box-shadow:none;border-radius:var(--radius-lg);border:1px solid var(--border);">
                <div class="carrito-header">
                  <div>
                    <div class="card-title">Carrito</div>
                    <div class="card-sub">Totales y ticket en vivo</div>
                  </div>
                  <button class="btn btn-outline" id="btnVaciar">Vaciar</button>
                </div>
                <div class="carrito-body">
                  <div>
                    <label class="field-label">Cliente (opcional)</label>
                    <select id="clienteSelect" class="select">
                      <option value="">Sin cliente</option>
                    </select>
                  </div>
                  <div class="carrito-grid-2">
                    <div>
                      <label class="field-label">Descuento (%)</label>
                      <input id="descPorc" class="input" type="number" min="0" max="100" value="0">
                    </div>
                    <div>
                      <label class="field-label">IVA (%)</label>
                      <input id="ivaPorc" class="input" type="number" min="0" max="100" value="0">
                    </div>
                  </div>
                  <div class="carrito-grid-2">
                    <div>
                      <label class="field-label">Extra (concepto)</label>
                      <input id="extraConcepto" class="input" placeholder="Curaci√≥n, servicio, etc.">
                    </div>
                    <div>
                      <label class="field-label">Extra ($)</label>
                      <input id="extraMonto" class="input" type="number" min="0" step="0.01" value="0">
                    </div>
                  </div>
                  <div>
                    <label class="field-label">Notas (motivo, receta, etc.)</label>
                    <input id="notas" class="input" placeholder="Opcional">
                  </div>
                  <div>
                    <label class="field-label">Productos</label>
                    <table class="carrito-tabla">
                      <thead>
                        <tr>
                          <th>Producto</th><th>Cant</th><th>Precio</th><th>Sub</th><th></th>
                        </tr>
                      </thead>
                      <tbody id="tablaCarritoBody"></tbody>
                    </table>
                  </div>
                  <div>
                    <label class="field-label">Forma de pago</label>
                    <select id="formaPago" class="select">
                      <option value="Efectivo">Efectivo</option>
                      <option value="Tarjeta">Tarjeta</option>
                      <option value="Transferencia">Transferencia</option>
                      <option value="Mixto">Mixto</option>
                    </select>
                  </div>
                  <div class="totales">
                    <div class="totales-row"><span>Subtotal:</span><span id="lblSubtotal">$0.00</span></div>
                    <div class="totales-row"><span>Descuento:</span><span id="lblDesc">$0.00</span></div>
                    <div class="totales-row"><span>Extra:</span><span id="lblExtra">$0.00</span></div>
                    <div class="totales-row"><span>IVA:</span><span id="lblIva">$0.00</span></div>
                    <div class="totales-row total"><strong>TOTAL:</strong><strong id="lblTotal">$0.00</strong></div>
                  </div>
                  <div class="acciones-cobro">
                    <button class="btn btn-primary" id="btnCobrar">Cobrar e imprimir</button>
                  </div>
                  <div>
                    <label class="field-label">Ticket (preview)</label>
                    <pre id="ticketPreview">(Vac√≠o)</pre>
                  </div>
                </div>
              </div>
            </div>
          </div><!-- ventas-layout -->
        </div>
      </section>

      <!-- INVENTARIO -->
      <section class="page" id="page-inventario">
        <div class="card">
          <div class="card-title">Inventario</div>
          <div class="card-sub">Administra los productos de la farmacia. Este inventario alimenta la secci√≥n Ventas.</div>
          <div class="grid" style="grid-template-columns:1.2fr 1.8fr;margin-top:10px;">
            <!-- Formulario -->
            <div>
              <div class="field-label">Imagen del producto</div>
              <div id="invImagenPreview" class="producto-img" style="height:110px;margin-bottom:6px;">üíä</div>
              <input type="file" id="invImagen" accept="image/*" class="input" style="padding:6px;">

              <div class="field-label" style="margin-top:8px;">SKU</div>
              <input id="invSku" class="input">

              <div class="field-label" style="margin-top:6px;">Nombre</div>
              <input id="invNombre" class="input">

              <div class="carrito-grid-2" style="margin-top:6px;">
                <div>
                  <div class="field-label">Precio venta</div>
                  <input id="invPrecio" class="input" type="number" min="0" step="0.01">
                </div>
                <div>
                  <div class="field-label">Costo</div>
                  <input id="invCosto" class="input" type="number" min="0" step="0.01">
                </div>
              </div>

              <div class="carrito-grid-2" style="margin-top:6px;">
                <div>
                  <div class="field-label">Stock piso</div>
                  <input id="invStockPiso" class="input" type="number" min="0" step="1">
                </div>
                <div>
                  <div class="field-label">Stock bodega</div>
                  <input id="invStockBodega" class="input" type="number" min="0" step="1">
                </div>
              </div>

              <div class="field-label" style="margin-top:6px;">Stock m√≠nimo</div>
              <input id="invStockMin" class="input" type="number" min="0" step="1">

              <div class="carrito-grid-2" style="margin-top:6px;">
                <div>
                  <div class="field-label">Lote</div>
                  <input id="invLote" class="input">
                </div>
                <div>
                  <div class="field-label">Caducidad</div>
                  <input id="invCaducidad" class="input" type="date">
                </div>
              </div>

              <div class="field-label" style="margin-top:6px;">Categor√≠a</div>
              <select id="invCategoria" class="select"></select>
              <div class="carrito-grid-2" style="margin-top:4px;">
                <div>
                  <input id="invCategoriaNueva" class="input" placeholder="Nueva categor√≠a">
                </div>
                <div style="display:flex;align-items:center;justify-content:flex-start;">
                  <button class="btn btn-soft" id="btnInvAgregarCategoria">Agregar cat.</button>
                </div>
              </div>

              <div style="margin-top:10px;display:flex;gap:8px;">
                <button class="btn btn-primary" id="btnInvGuardar">Guardar producto</button>
                <button class="btn btn-outline" id="btnInvNuevo">Limpiar</button>
              </div>
            </div>

            <!-- Tabla -->
            <div>
              <div class="field-label">Productos</div>
              <div style="margin-top:6px;display:flex;gap:8px;flex-wrap:wrap;">
                <button class="btn btn-soft" id="btnInvCargarDemo">Cargar demo inventario</button>
                <button class="btn btn-outline" id="btnInvExportCsv">Exportar Excel</button>
                <button class="btn btn-outline" id="btnInvExportPdf">Exportar PDF</button>
              </div>
              <div style="margin-top:8px;max-height:380px;overflow:auto;">
                <table class="inv-table">
                  <thead>
                    <tr>
                      <th>Img</th>
                      <th>SKU</h>
                      <th>Nombre</th>
                      <th>Precio</th>
                      <th>Piso</th>
                      <th>Bodega</th>
                      <th>Cat</th>
                      <th>Lote/Cad</th>
                      <th>Acciones</th>
                    </tr>
                  </thead>
                  <tbody id="tablaInventario"></tbody>
                </table>
              </div>
              <p style="font-size:12px;color:#64748b;margin-top:6px;">
                Nota: al cobrar en Ventas se descuenta del <strong>stock piso</strong> de este inventario.
              </p>
            </div>
          </div>
        </div>
      </section>

      <!-- BODEGA -->
      <section class="page" id="page-bodega">
        <div class="card">
          <div class="card-title">Bodega</div>
          <div class="card-sub">Control de stock en bodega y surtidos hacia piso.</div>

          <div class="grid" style="grid-template-columns:1.2fr 1.8fr;margin-top:10px;">
            <!-- Formulario de lote y movimientos -->
            <div>
              <div class="field-label">Producto (SKU)</div>
              <select id="bodSku" class="select"></select>

              <div class="carrito-grid-2" style="margin-top:6px;">
                <div>
                  <div class="field-label">Cantidad lote</div>
                  <input id="bodCant" class="input" type="number" min="0" step="1" value="0">
                </div>
                <div>
                  <div class="field-label">Costo (opcional)</div>
                  <input id="bodCosto" class="input" type="number" min="0" step="0.01" placeholder="Dejar en blanco = igual inventario">
                </div>
              </div>

              <div class="carrito-grid-2" style="margin-top:6px;">
                <div>
                  <div class="field-label">Lote</div>
                  <input id="bodLote" class="input">
                </div>
                <div>
                  <div class="field-label">Caducidad</div>
                  <input id="bodCaducidad" class="input" type="date">
                </div>
              </div>

              <div style="margin-top:10px;display:flex;flex-wrap:wrap;gap:8px;">
                <button class="btn btn-primary" id="btnBodAgregarLote">Agregar a bodega</button>
                <button class="btn btn-soft" id="btnBodCargarDemo">Cargar demo</button>
              </div>

              <p style="font-size:12px;color:#64748b;margin-top:8px;">
                Desde aqu√≠ puedes <strong>sumar stock a bodega</strong> y luego surtir a piso.
              </p>
            </div>

            <!-- Tabla de productos en bodega -->
            <div>
              <div class="field-label">Stock bodega vs piso</div>
              <div style="margin-top:6px;max-height:380px;overflow:auto;">
                <table class="inv-table">
                  <thead>
                    <tr>
                      <th>SKU</th>
                      <th>Nombre</th>
                      <th>Bodega</th>
                      <th>Piso</th>
                      <th>Lote/Cad</th>
                      <th>Acciones</th>
                    </tr>
                  </thead>
                  <tbody id="tablaBodega"></tbody>
                </table>
              </div>
              <p style="font-size:12px;color:#64748b;margin-top:6px;">
                <strong>Surtir a piso:</strong> mueve piezas de bodega hacia el stock de piso.<br>
                <strong>Regresar a bodega:</strong> devuelve piezas desde piso a bodega.
              </p>
            </div>
          </div>
        </div>
      </section>

      <!-- CLIENTES -->
      <section class="page" id="page-clientes">
        <div class="card">
          <div class="card-title">Clientes</div>
          <div class="card-sub">En esta demo puedes cargar clientes b√°sicos para seleccionarlos en Ventas.</div>
          <div class="grid" style="grid-template-columns:1.3fr 1.7fr;margin-top:10px;">
            <div>
              <div class="field-label">Nombre completo</div>
              <input id="cliNombre" class="input">
              <div class="field-label" style="margin-top:6px;">Tel√©fono</div>
              <input id="cliTel" class="input">
              <div class="field-label" style="margin-top:6px;">Correo (opcional)</div>
              <input id="cliCorreo" class="input">
              <button class="btn btn-primary" style="margin-top:8px;" id="btnAgregarCliente">Guardar cliente</button>
            </div>
            <div>
              <div class="field-label">Lista de clientes</div>
              <div id="listaClientes" style="font-size:13px;margin-top:4px;"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- HISTORIAL -->
      <section class="page" id="page-historial">
        <div class="card">
          <div class="card-title">Historial</div>
          <div class="card-sub">Consulta tickets cobrados, filtra y exporta resultados.</div>

          <div class="ventas-filtros" style="margin-top:10px;">
            <div style="flex:1;min-width:140px;">
              <label class="field-label">Desde</label>
              <input id="histDesde" type="date" class="input">
            </div>
            <div style="flex:1;min-width:140px;">
              <label class="field-label">Hasta</label>
              <input id="histHasta" type="date" class="input">
            </div>
            <div style="flex:1;min-width:140px;">
              <label class="field-label">Forma de pago</label>
              <select id="histFormaPago" class="select">
                <option value="">Todas</option>
                <option value="Efectivo">Efectivo</option>
                <option value="Tarjeta">Tarjeta</option>
                <option value="Transferencia">Transferencia</option>
                <option value="Mixto">Mixto</option>
              </select>
            </div>
            <div style="flex:1.2;min-width:160px;">
              <label class="field-label">Cliente</label>
              <input id="histCliente" class="input" placeholder="Nombre de cliente">
            </div>
          </div>

          <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:8px;">
            <button class="btn btn-soft" id="btnHistLimpiar">Limpiar filtros</button>
            <button class="btn btn-outline" id="btnHistExportCsv">Exportar Excel (CSV)</button>
            <button class="btn btn-outline" id="btnHistExportPdf">Exportar PDF</button>
          </div>

          <div style="max-height:380px;overflow:auto;margin-top:4px;">
            <table class="inv-table">
              <thead>
                <tr>
                  <th>Ticket</th>
                  <th>Fecha</th>
                  <th>Cliente</th>
                  <th>Pago</th>
                  <th>Total</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody id="historialTabla"></tbody>
            </table>
          </div>
          <p id="historialResumen" style="font-size:12px;color:#64748b;margin-top:6px;"></p>
        </div>
      </section>

      <!-- REPORTES -->
      <section class="page" id="page-reportes">
        <div class="card">
          <div class="card-title">Reportes</div>
          <div class="card-sub">Resumen simple de ventas con base en el historial (demo).</div>
          <div id="reportesResumen" style="font-size:13px;margin-top:8px;"></div>
        </div>
      </section>

      <!-- CONFIGURACI√ìN -->
      <section class="page" id="page-config">
        <div class="card">
          <div class="card-title">Configuraci√≥n</div>
          <div class="card-sub">Demo de par√°metros b√°sicos: nombre de negocio, IVA y mensaje de ticket.</div>
          <div class="grid" style="grid-template-columns:1.3fr 1.7fr;margin-top:10px;">
            <div>
              <div class="field-label">Nombre del negocio</div>
              <input id="cfgNegocio" class="input">
              <div class="field-label" style="margin-top:6px;">IVA por defecto (%)</div>
              <input id="cfgIva" class="input" type="number" min="0" max="100">
              <div class="field-label" style="margin-top:6px;">Mensaje final del ticket</div>
              <textarea id="cfgMensaje" rows="3"></textarea>
              <button class="btn btn-primary" style="margin-top:8px;" id="btnGuardarCfg">Guardar configuraci√≥n</button>
            </div>
            <div>
              <div class="field-label">Respaldos (JSON)</div>
              <button class="btn btn-soft" id="btnExportJson" style="margin-top:4px;">Exportar backup JSON</button>
              <div style="margin-top:6px;">
                <input type="file" id="inputImportJson" accept="application/json">
              </div>
              <p style="font-size:12px;color:#64748b;margin-top:6px;">
                La configuraci√≥n, inventario, clientes y ventas se guardan en este navegador usando <strong>localStorage</strong>.
              </p>
            </div>
          </div>
        </div>
      </section>
    </div>
  </main>
</div>

<script src="app.js"></script>
</body>
</html>
