<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Farmacia DP v1</title>

  <!-- Anti-cache del CSS -->
  <link rel="stylesheet" href="style.css?v=dp-1.5" />

  <!-- Sugerencias anti-cache al navegador -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
</head>
<body>
  <!-- Sidebar -->
  <aside id="sidebar" class="sidebar">
    <div class="brand">
      <button id="btnToggle" class="icon-btn" aria-label="Contraer/Expandir men√∫">‚ò∞</button>
      <span class="brand-title">Farmacia DP v1</span>
    </div>
    <nav class="nav">
      <button class="nav-link active" data-section="dashboard">üìä Dashboard</button>
      <button class="nav-link" data-section="ventas">üßæ Ventas</button>
      <button class="nav-link" data-section="inventario">üíä Inventario</button>
      <button class="nav-link" data-section="bodega">üè∑Ô∏è Bodega</button>
      <button class="nav-link" data-section="clientes">üë§ Clientes</button>
      <button class="nav-link" data-section="historial">üßæ Historial</button>
      <button class="nav-link" data-section="reportes">üìà Reportes</button>
      <button class="nav-link" data-section="config">‚öôÔ∏è Configuraci√≥n</button>
    </nav>
  </aside>

  <!-- Contenido -->
  <main id="content" class="content">
    <header class="topbar">
      <button id="btnOpen" class="icon-btn show-on-mobile" aria-label="Abrir men√∫">‚ò∞</button>
      <h1 id="sectionTitle">Dashboard</h1>
      <div class="topbar-actions">
        <input id="globalSearch" type="search" placeholder="Buscar‚Ä¶" />
      </div>
    </header>

    <!-- Dashboard -->
    <section id="dashboard" class="view active">
      <div class="grid kpis">
        <div class="card">Ventas Hoy <strong>$0.00</strong></div>
        <div class="card">Tickets Hoy <strong>0</strong></div>
        <div class="card">Productos vendidos <strong>0</strong></div>
        <div class="card">Ticket promedio <strong>$0.00</strong></div>
      </div>
    </section>

    <!-- Ventas -->
    <section id="ventas" class="view">
      <div class="ventas-wrap">
        <div class="ventas-toolbar">
          <input type="search" id="ventaBuscar" placeholder="Buscar producto o SKU‚Ä¶" />
          <select id="ventaEtiqueta">
            <option value="">Todas las etiquetas</option>
            <option>Gen√©rico</option>
            <option>Marca</option>
            <option>Controlado</option>
            <option>Servicio</option>
          </select>
          <div class="scanner">
            <label for="barcodeInput">Esc√°ner:</label>
            <input id="barcodeInput" type="text" placeholder="Apunta el lector aqu√≠‚Ä¶" />
            <button id="reactivarScanner" class="btn">Reactivar</button>
          </div>
        </div>

        <!-- Cat√°logo demo -->
        <div class="catalogo" id="catalogoProductos">
          <!-- Se llena desde app.js con los productos del inventario -->
        </div>

        <!-- Carrito -->
        <aside class="carrito" id="carritoPanel">
          <h3>Carrito</h3>
          <ul id="carritoLista" class="list slim"><li>(Vac√≠o)</li></ul>

          <div class="extras">
            <h4>Extras</h4>
            <div class="extras-row">
              <input id="extraDesc" type="text" placeholder="Descripci√≥n (ej. Curaci√≥n)" />
              <input id="extraMonto" type="number" step="0.01" placeholder="Monto" />
              <button id="btnAgregarExtra" class="btn">Agregar extra</button>
            </div>
            <ul id="extrasLista" class="list slim"></ul>
          </div>

          <div class="receta">
            <h4>Receta del paciente</h4>
            <input id="recetaFile" type="file" accept="image/*,.pdf" />
            <img id="recetaPreview" class="receta-preview" alt="Vista previa receta" />
          </div>

          <div class="total"><span>Total:</span><strong id="total">$0.00</strong></div>

          <div class="cart-actions">
            <button id="btnCobrar" class="btn primary">Cobrar</button>
            <button id="btnVaciar" class="btn">Vaciar</button>
          </div>
        </aside>

        <button id="btnCarritoMovil" class="btn floating show-on-mobile">Carrito</button>
      </div>
    </section>

    <!-- Inventario -->
    <section id="inventario" class="view">
      <div class="inv-toolbar">
        <button id="btnNuevoProd" class="btn primary">+ Producto</button>
        <label class="filelike">
          <input id="fileImport" type="file" accept=".csv" hidden />
          Importar CSV
        </label>
        <input id="invBuscar" class="input" placeholder="Filtrar por nombre/SKU‚Ä¶" />
        <select id="invEtiqueta" class="input">
          <option value="">Etiqueta (todas)</option>
          <option>Gen√©rico</option><option>Marca</option><option>Controlado</option><option>Servicio</option>
        </select>
      </div>

      <div class="badges">
        <span class="chip warn" id="badgeStock">Stock bajo: 0</span>
        <span class="chip danger" id="badgeCad">Pr√≥ximas caducidades: 0</span>
      </div>

      <div class="table-wrap">
        <table class="table" id="tablaInv">
          <thead>
            <tr>
              <th>IMG</th>
              <th>SKU</th>
              <th>Nombre</th>
              <th>Etiqueta</th>
              <th>Precio</th>
              <th>Stock</th>
              <th>M√≠n</th>
              <th>Lotes</th>
              <th>Cad. Pr√≥x.</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody><!-- filas desde JS --></tbody>
        </table>
      </div>
    </section>

    <!-- Bodega / Clientes / Historial / Reportes / Config (placeholders por ahora) -->
    <section id="bodega" class="view"><div class="card">Bodega (siguiente m√≥dulo)</div></section>
    <section id="clientes" class="view"><div class="card">Clientes</div></section>
    <section id="historial" class="view"><div class="card">Historial</div></section>
    <section id="reportes" class="view"><div class="card">Reportes</div></section>
    <section id="config" class="view"><div class="card">Configuraci√≥n</div></section>
  </main>

  <!-- Di√°logos (Inventario) -->
  <dialog id="dlgProd" class="modal">
    <form method="dialog" class="form">
      <h3 id="dlgProdTitle">Nuevo producto</h3>
      <div class="grid2">
        <label>SKU <input id="fSku" required /></label>
        <label>Nombre <input id="fNombre" required /></label>
        <label>Etiqueta
          <select id="fEtiqueta">
            <option>Gen√©rico</option><option>Marca</option><option>Controlado</option><option>Servicio</option>
          </select>
        </label>
        <label>Precio (venta) <input id="fPrecio" type="number" step="0.01" required /></label>
        <label>Costo <input id="fCosto" type="number" step="0.01" /></label>
        <label>Stock m√≠nimo <input id="fMin" type="number" step="1" value="0" /></label>
        <label>Imagen (URL) <input id="fImg" placeholder="https://..." /></label>
      </div>
      <div class="modal-actions">
        <button class="btn" value="cancel">Cancelar</button>
        <button id="btnGuardarProd" class="btn primary" value="default">Guardar</button>
      </div>
    </form>
  </dialog>

  <dialog id="dlgStock" class="modal">
    <form method="dialog" class="form">
      <h3>Agregar stock (lote)</h3>
      <div class="grid2">
        <label>Lote <input id="sLote" required /></label>
        <label>Caducidad <input id="sCad" type="date" /></label>
        <label>Piezas <input id="sPiezas" type="number" step="1" required /></label>
      </div>
      <div class="modal-actions">
        <button class="btn" value="cancel">Cancelar</button>
        <button id="btnGuardarStock" class="btn primary" value="default">Agregar</button>
      </div>
    </form>
  </dialog>

  <!-- Anti-cache del JS -->
  <script src="app.js?v=dp-1.5"></script>
</body>
</html>
