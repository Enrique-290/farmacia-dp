<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Farmacia DP v1</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <aside class="sidebar">
    <div class="brand">
      <span class="pill">üíä</span>
      <span class="title">Farmacia DP v1</span>
    </div>
    <nav class="nav">
      <a href="#" data-go="dashboard">üìä Dashboard</a>
      <a href="#" data-go="ventas">üßæ Ventas</a>
      <a href="#" data-go="inventario">üíä Inventario</a>
      <a href="#" data-go="bodega">üì¶ Bodega</a>
      <a href="#" data-go="clientes">üë§ Clientes</a>
      <a href="#" data-go="historial">üßæ Historial</a>
      <a href="#" data-go="reportes">üìà Reportes</a>
      <a href="#" data-go="config">‚öôÔ∏è Configuraci√≥n</a>
    </nav>
  </aside>

  <main class="main">
    <!-- Barra superior -->
    <header class="topbar">
      <input id="topSearch" class="input" type="search" placeholder="Buscar por nombre, SKU o etiqueta‚Ä¶" />
      <div class="scanner">
        <label for="scannerInput">Esc√°ner:</label>
        <input id="scannerInput" class="input" type="text" placeholder="Apunta el lector aqu√≠‚Ä¶" />
        <button id="scannerReactivate" class="btn ghost">Reactivar</button>
      </div>
    </header>

    <!-- VISTAS -->
    <section class="view" data-view="dashboard">
      <h1>Dashboard</h1>
      <div class="grid kpis">
        <div class="card"><div class="kpi-title">Ventas Hoy</div><div id="kpiVentasHoy" class="kpi">$0.00</div></div>
        <div class="card"><div class="kpi-title">Tickets Hoy</div><div id="kpiTicketsHoy" class="kpi">0</div></div>
        <div class="card"><div class="kpi-title">Prod. vendidos</div><div id="kpiProdHoy" class="kpi">0</div></div>
        <div class="card"><div class="kpi-title">Ticket prom.</div><div id="kpiTicketProm" class="kpi">$0.00</div></div>
      </div>
      <div class="grid two">
        <div class="card"><h3>Alertas ‚Äî Stock bajo</h3><div id="alertStockBajo" class="list empty">(Vac√≠o)</div></div>
        <div class="card"><h3>Alertas ‚Äî Pr√≥ximas caducidades</h3><div id="alertCad" class="list empty">(Vac√≠o)</div></div>
      </div>
    </section>

    <section class="view hidden" data-view="ventas">
      <h1>Ventas</h1>
      <div class="ventas-layout">
        <div class="catalogo" id="catalogo"></div>
        <aside class="carrito card">
          <h2>Carrito</h2>
          <div id="cartList" class="list empty">(Vac√≠o)</div>

          <div class="extras">
            <h3>Extras</h3>
            <div class="row">
              <input id="extraDesc" class="input" placeholder="Descripci√≥n (ej. Curaci√≥n)" />
              <input id="extraMonto" class="input" type="number" min="0" step="0.01" placeholder="Monto" />
              <button id="btnAddExtra" class="btn">Agregar extra</button>
            </div>
          </div>

          <div class="receta">
            <h3>Receta del paciente</h3>
            <input id="recetaFile" type="file" accept="image/*,application/pdf" />
          </div>

          <div class="pago">
            <h3>Pago</h3>
            <div class="row">
              <select id="paymentMethod" class="input">
                <option value="EFE">Efectivo</option>
                <option value="TAR">Tarjeta</option>
                <option value="TRA">Transferencia</option>
                <option value="OTR">Otro</option>
              </select>
              <input id="paymentRef" class="input" placeholder="Referencia / notas (opcional)" />
            </div>
          </div>

          <div class="total"><span>Total:</span><strong id="cartTotal">$0.00</strong></div>
          <div class="row">
            <button id="btnCobrar" class="btn primary">Cobrar</button>
            <button id="btnVaciar" class="btn danger ghost">Vaciar</button>
          </div>
        </aside>
      </div>
    </section>

    <section class="view hidden" data-view="inventario">
      <h1>Inventario</h1>
      <div class="row">
        <button id="btnNuevoProd" class="btn">+ Producto</button>
        <input id="invSearch" class="input" placeholder="Buscar‚Ä¶" />
        <select id="invFilterTag" class="input">
          <option value="">Etiqueta (todas)</option>
          <option value="Generico">Gen√©rico</option>
          <option value="Marca">Marca</option>
          <option value="Controlado">Controlado</option>
          <option value="Servicio">Servicio</option>
        </select>
      </div>
      <p class="note">Nota: im√°genes se guardan <strong>localmente</strong> (no URL).</p>
      <table class="table" id="invTable">
        <thead>
          <tr>
            <th>IMG</th><th>SKU</th><th>Nombre</th><th>Etiqueta</th>
            <th>Precio</th><th>Stock</th><th>M√≠n</th><th>Lotes</th><th>Cad. Pr√≥x.</th><th>Acciones</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <section class="view hidden" data-view="bodega"><h1>Bodega (pr√≥ximo)</h1></section>
    <section class="view hidden" data-view="clientes"><h1>Clientes (pr√≥ximo)</h1></section>
    <section class="view hidden" data-view="historial"><h1>Historial (pr√≥ximo)</h1></section>
    <section class="view hidden" data-view="reportes"><h1>Reportes (pr√≥ximo)</h1></section>
    <section class="view hidden" data-view="config"><h1>Configuraci√≥n (pr√≥ximo)</h1></section>
  </main>

  <!-- MODAL: Producto (Nuevo/Editar) -->
  <div class="modal hidden" id="modalProd">
    <div class="modal__backdrop" data-close="modalProd"></div>
    <div class="modal__panel">
      <h2 id="prodModalTitle">Producto</h2>
      <div class="form">
        <div class="row">
          <div class="col">
            <label>SKU</label>
            <input id="fSku" class="input" />
          </div>
          <div class="col">
            <label>Nombre</label>
            <input id="fNombre" class="input" />
          </div>
        </div>
        <div class="row">
          <div class="col">
            <label>Etiqueta</label>
            <select id="fEtiqueta" class="input">
              <option value="Generico">Gen√©rico</option>
              <option value="Marca">Marca</option>
              <option value="Controlado">Controlado</option>
              <option value="Servicio">Servicio</option>
            </select>
          </div>
          <div class="col">
            <label>Precio (venta)</label>
            <input id="fPrecio" class="input" type="number" min="0" step="0.01"/>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <label>Stock inicial</label>
            <input id="fStock" class="input" type="number" min="0" step="1"/>
          </div>
          <div class="col">
            <label>Stock m√≠nimo</label>
            <input id="fMin" class="input" type="number" min="0" step="1" value="0"/>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <label>Imagen (desde dispositivo)</label>
            <input id="fImg" type="file" accept="image/*"/>
          </div>
          <div class="col">
            <div class="preview" id="fPreview">Sin imagen</div>
          </div>
        </div>
      </div>
      <div class="row end">
        <button class="btn ghost" data-close="modalProd">Cancelar</button>
        <button class="btn primary" id="btnProdGuardar">Guardar</button>
      </div>
    </div>
  </div>

  <!-- MODAL: +Stock (lote) -->
  <div class="modal hidden" id="modalStock">
    <div class="modal__backdrop" data-close="modalStock"></div>
    <div class="modal__panel">
      <h2>Agregar stock (lote)</h2>
      <div class="form">
        <div class="row">
          <div class="col">
            <label>Lote</label>
            <input id="sLote" class="input"/>
          </div>
          <div class="col">
            <label>Caducidad</label>
            <input id="sCad" class="input" type="date"/>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <label>Piezas</label>
            <input id="sPzas" class="input" type="number" min="1" step="1" value="1"/>
          </div>
        </div>
      </div>
      <div class="row end">
        <button class="btn ghost" data-close="modalStock">Cancelar</button>
        <button class="btn primary" id="btnAddLote">Agregar</button>
      </div>
    </div>
  </div>

  <script src="app.js?v=20251107a"></script>
</body>
</html>
