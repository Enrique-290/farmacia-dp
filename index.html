<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta http-equiv="Cache-Control" content="no-store" />
  <title>Farmacia DP v1</title>
  <!-- Ruta absoluta + bust de cach√© -->
  <link rel="stylesheet" href="/styles.css?v=20251107" />
</head>
<body>
<div class="app">

  <!-- MEN√ö LATERAL -->
  <aside>
    <div class="brand">
      <div class="logo">üíä</div>
      <div class="title">Farmacia DP v1</div>
    </div>
    <nav>
      <a class="nav-btn active" data-go="dashboard">üìä Dashboard</a>
      <a class="nav-btn" data-go="ventas">üßæ Ventas</a>
      <a class="nav-btn" data-go="inventario">üíä Inventario</a>
      <a class="nav-btn" data-go="bodega">üè∑Ô∏è Bodega</a>
      <a class="nav-btn" data-go="clientes">üë§ Clientes</a>
      <a class="nav-btn" data-go="historial">üìú Historial</a>
      <a class="nav-btn" data-go="reportes">üìà Reportes</a>
      <a class="nav-btn" data-go="config">‚öôÔ∏è Configuraci√≥n</a>
    </nav>
  </aside>

  <!-- PANEL -->
  <main>
    <!-- Topbar con super buscador + esc√°ner -->
    <div class="topbar">
      <div class="h1" id="viewTitle">Dashboard</div>
      <div class="searchWrap">
        <input id="globalSearch" class="input" placeholder="Buscar por nombre, SKU o etiqueta‚Ä¶" />
        <input id="scanInput" class="input" style="width:260px" placeholder="Apunta el lector aqu√≠‚Ä¶" />
        <button class="btn light" id="reactivarScanner">Reactivar</button>
      </div>
    </div>

    <!-- DASHBOARD -->
    <section id="view-dashboard" class="grid cols-3">
      <div class="card pad">
        <div class="section-title">KPIs del d√≠a</div>
        <div class="kpis">
          <div class="kpi"><div class="muted">Ventas Hoy</div><div class="v" id="kpiVentas">$0.00</div></div>
          <div class="kpi"><div class="muted">Tickets Hoy</div><div class="v" id="kpiTickets">0</div></div>
          <div class="kpi"><div class="muted">Prod. vendidos</div><div class="v" id="kpiItems">0</div></div>
          <div class="kpi"><div class="muted">Ticket prom.</div><div class="v" id="kpiProm">$0.00</div></div>
        </div>
      </div>
      <div class="card pad">
        <div class="section-title">Alertas ‚Äî Stock bajo</div>
        <div id="alertStock" class="muted">(Vac√≠o)</div>
      </div>
      <div class="card pad">
        <div class="section-title">Alertas ‚Äî Pr√≥ximas caducidades</div>
        <div id="alertCad" class="muted">(Vac√≠o)</div>
      </div>
    </section>

    <!-- VENTAS -->
    <section id="view-ventas" class="hidden">
      <div class="grid cols-3">
        <div class="card pad" style="grid-column:1 / 3">
          <div class="section-title">Cat√°logo</div>
          <div id="productGrid" class="product-grid"></div>
        </div>

        <div class="card pad">
          <div class="section-title">Carrito</div>
          <div id="cart" class="cart"></div>

          <div class="section-title">Extras</div>
          <div class="row-gap">
            <input id="extraDesc" class="input" placeholder="Descripci√≥n (ej. Curaci√≥n)" style="flex:1; min-width:160px">
            <input id="extraMonto" class="input" type="number" placeholder="Monto" style="width:140px">
            <button class="btn gray" id="agregarExtra">Agregar extra</button>
          </div>

          <div class="section-title">Receta del paciente</div>
          <input id="receta" class="file" type="file" accept="image/*,.pdf" />

          <div class="section-title">Pago</div>
          <div class="row-gap">
            <select id="metodoPago">
              <option value="EFE">Efectivo</option>
              <option value="TAR">Tarjeta</option>
              <option value="TRA">Transferencia</option>
              <option value="OTR">Otro</option>
            </select>
            <input id="refPago" class="input" placeholder="Referencia / notas (opcional)" style="flex:1;min-width:200px">
          </div>

          <div class="total">
            <div>Total:</div>
            <div id="total">$0.00</div>
          </div>

          <div class="row" style="margin-top:10px">
            <button class="btn" id="btnCobrar">Cobrar</button>
            <button class="btn gray" id="btnVaciar">Vaciar</button>
          </div>
        </div>
      </div>
    </section>

    <!-- INVENTARIO -->
    <section id="view-inventario" class="hidden">
      <div class="card pad">
        <div class="row" style="margin-bottom:12px">
          <div class="section-title">Inventario</div>
          <div class="right">
            <button class="btn light" id="btnNuevoProd">+ Producto</button>
          </div>
        </div>
        <table class="table" id="tablaInv">
          <thead>
            <tr>
              <th>IMG</th><th>SKU</th><th>Nombre</th><th>Etiqueta</th><th>Precio</th><th>Stock</th><th>M√≠n</th><th>Lotes</th><th>Cad. Pr√≥x.</th><th>Acciones</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
        <div class="muted" style="margin-top:8px">Nota: im√°genes se guardan <b>localmente</b> en el dispositivo (no URL).</div>
      </div>
    </section>

    <!-- Bodega / Clientes -->
    <section id="view-bodega" class="hidden">
      <div class="card pad"><div class="section-title">Bodega (pr√≥ximo)</div><div class="muted">Mover√° piezas contra solicitudes de Inventario.</div></div>
    </section>
    <section id="view-clientes" class="hidden">
      <div class="card pad"><div class="section-title">Clientes (pr√≥ximo)</div><div class="muted">Historial por cliente, importaci√≥n, etc.</div></div>
    </section>

    <!-- HISTORIAL -->
    <section id="view-historial" class="hidden">
      <div class="card pad">
        <div class="row" style="margin-bottom:8px">
          <div class="section-title">Historial de ventas</div>
          <div class="muted">Rango y exportaci√≥n pr√≥ximamente</div>
        </div>
        <table class="table" id="tablaHist">
          <thead>
            <tr><th>Folio</th><th>Fecha/Hora</th><th>Cliente</th><th>Total</th><th>Pago</th><th>Receta</th><th>Estado</th><th></th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- REPORTES -->
    <section id="view-reportes" class="hidden">
      <div class="card pad">
        <div class="section-title">Resumen</div>
        <div id="repResumen" class="grid" style="gap:6px">
          <div>Total ventas: $0.00</div>
          <div>Tickets: 0</div>
          <div>Ticket promedio: $0.00</div>
          <div>Top productos: ‚Äî</div>
          <div id="repMetodos">Por m√©todo: ‚Äî</div>
        </div>
      </div>
    </section>

    <!-- CONFIG -->
    <section id="view-config" class="hidden">
      <div class="card pad"><div class="section-title">Configuraci√≥n (pr√≥ximo)</div>
        <div class="muted">Colores, datos del negocio, ticket 58 mm, respaldos.</div>
      </div>
    </section>

  </main>
</div>

<!-- JS con ruta absoluta + defer -->
<script src="/app.js?v=20251107" defer></script>
</body>
</html>
